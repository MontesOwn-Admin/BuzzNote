<app-header [showBackButton]="false" />
<div class="container">
    <app-alerts [error]="error" [message]="message" />
    <main>
        {{currentFrameNumber}} = {{currentBox.num_frames}}
        @if (inspectionID !== 0) {
        @if (showBoxSelection) {
        <h2>Choose a box to inspect</h2>
        <div class="button-group-column">
            @for (box of boxes; track $index) {
            <button class="button white large full" (click)="selectBox(box)">{{box.box_name}}</button>
            }
        </div>
        }
        @if (!showBoxSelection) {
        <h2>Current Frame: {{currentFrameNumber}}</h2>
        <app-frame-toggle-button label="Honey" [sideAValue]="currentFrame.honey.sideA"
            [sideBValue]="currentFrame.honey.sideB" (sideAChange)="currentFrame.honey.sideA = $event"
            (sideBChange)="currentFrame.honey.sideB = $event" />
        <app-frame-toggle-button label="Nectar" [sideAValue]="currentFrame.nectar.sideA"
            [sideBValue]="currentFrame.nectar.sideB" (sideAChange)="currentFrame.nectar.sideA = $event"
            (sideBChange)="currentFrame.nectar.sideB = $event"></app-frame-toggle-button>
    
        <app-frame-toggle-button label="Brood" [sideAValue]="currentFrame.brood.sideA"
            [sideBValue]="currentFrame.brood.sideB" (sideAChange)="currentFrame.brood.sideA = $event"
            (sideBChange)="currentFrame.brood.sideB = $event"></app-frame-toggle-button>
    
        <app-frame-toggle-button label="Queen Cells" [sideAValue]="currentFrame.queen_cells.sideA"
            [sideBValue]="currentFrame.queen_cells.sideB" (sideAChange)="currentFrame.queen_cells.sideA = $event"
            (sideBChange)="currentFrame.queen_cells.sideB = $event"></app-frame-toggle-button>
    
        <app-frame-toggle-button label="Drawn Comb" [sideAValue]="currentFrame.drawn_comb.sideA"
            [sideBValue]="currentFrame.drawn_comb.sideB" (sideAChange)="currentFrame.drawn_comb.sideA = $event"
            (sideBChange)="currentFrame.drawn_comb.sideB = $event"></app-frame-toggle-button>
        <app-frame-toggle-button label="Queen Spotted" [sideAValue]="currentFrame.queenSpotted.sideA"
            [sideBValue]="currentFrame.queenSpotted.sideB" (sideAChange)="currentFrame.queenSpotted.sideA = $event"
            (sideBChange)="currentFrame.queenSpotted.sideB = $event"></app-frame-toggle-button>
    
        <br />// frames attributes here
        <br />// if side A, buttons for next side, next box and finish
        <br />// if side B, buttons for next frame, next box, and finish
        <br />// Finish navigates to end of inspection observations, need to send inspection id
        <div class="button-group-row">
            @if (boxes.length !== 0) {
            @if (currentFrameNumber < currentBox.num_frames) { <button class="button blue" (click)="onSubmit(1)">Next
                Frame</button>
                }
                }
                @if (boxes.length > 1) {
                <button class="button green" (click)="onSubmit(2)">Next Box</button>
                }
                <button class="button orange" (click)="onSubmit(3)">Finish Inspection</button>
        </div>
        }
        }
        <h3>Averages</h3>
        <p>honey: {{currentBoxAverages.honey}}</p>
        <p>nectar: {{currentBoxAverages.nectar}}</p>
        <p>cells: {{currentBoxAverages.cells}}</p>
        <p>Brood: {{currentBoxAverages.brood}}</p>
        <p>Draw Comb: {{currentBoxAverages.comb}}</p>
        <p>queen spotted: {{currentBoxAverages.queen}}</p>
    </main>
</div>